<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>출퇴근앱</title>
  </head>
  <body>
    <p>로딩중...</p>

    <script type="module">
      let deeplinkOpened = false;

      if (window.Capacitor) {
        const { App } = window.Capacitor.Plugins;

        App.addListener("appUrlOpen", (event) => {
          deeplinkOpened = true;
          console.log("앱으로 열림:", event.url);

          if (event.url.includes("/main/in.html")) {
            window.location.href = "./main/in.html";
          } else if (event.url.includes("/main/out.html")) {
            window.location.href = "./main/out.html";
          } else if (event.url.includes("/main/table.html")) {
            window.location.href = "./main/table.html";
          } else if (event.url.includes("/main/home.html")) {
            window.location.href = "./main/home.html";
          }
        });
      }

      // 딥링크가 아닌 일반 실행일 때만 홈으로 이동
      setTimeout(() => {
        if (!deeplinkOpened) {
          window.location.href = "./main/home.html";
        }
      }, 200);
    </script>
  </body>
</html>
